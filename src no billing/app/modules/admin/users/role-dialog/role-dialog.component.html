<div class="w-[600px] h-[80vh] flex flex-col">
    <!-- Header -->
    <div class="p-8 pb-4 text-2xl font-semibold">
        {{data.role ? 'Edit Role' : 'Add Role'}}
    </div>

    <!-- Scrollable content -->
    <div class="flex-1 overflow-y-auto px-8 pb-4">
        <form [formGroup]="roleForm">
            <!-- ID -->
            <mat-form-field class="w-full mb-4">
                <mat-label>Role ID</mat-label>
                <input
                    matInput
                    [formControlName]="'id'"
                    [placeholder]="'admin'"
                >
                <mat-error *ngIf="roleForm.get('id').hasError('required')">
                    Role ID is required
                </mat-error>
            </mat-form-field>

            <!-- Name -->
            <mat-form-field class="w-full mb-6">
                <mat-label>Role Name</mat-label>
                <input
                    matInput
                    [formControlName]="'name'"
                    [placeholder]="'Administrator'"
                >
                <mat-error *ngIf="roleForm.get('name').hasError('required')">
                    Role name is required
                </mat-error>
            </mat-form-field>

            <!-- Permissions -->
            <div class="text-lg font-medium mb-4">Permissions</div>

            <!-- Permission groups -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                <ng-container *ngFor="let group of permissionGroups | keyvalue">
                    <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                        <div class="font-medium mb-2 capitalize">{{group.key}}</div>
                        <div class="space-y-2">
                            <ng-container *ngFor="let permission of group.value">
                                <div class="flex items-center">
                                    <mat-checkbox
                                        [checked]="isPermissionSelected(permission)"
                                        (change)="togglePermission(permission)"
                                    >
                                        <div class="flex flex-col">
                                            <span class="text-sm">{{getPermissionDescription(permission)}}</span>
                                            <span class="text-xs text-gray-500">{{permission}}</span>
                                        </div>
                                    </mat-checkbox>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </ng-container>
            </div>
        </form>
    </div>

    <!-- Actions (fixed footer) -->
    <div class="px-8 py-4 border-t flex items-center justify-end">
        <button
            mat-button
            [matDialogClose]="undefined"
        >
            Cancel
        </button>
        <button
            class="ml-2"
            mat-flat-button
            [color]="'primary'"
            [disabled]="roleForm.invalid"
            (click)="saveAndClose()"
        >
            Save
        </button>
    </div>
</div>
