<div class="p-6">
  <h2 class="text-2xl font-semibold">Billing</h2>

  <div *ngIf="loading()" class="mt-4">Loading...</div>
  <div *ngIf="!loading() && error()" class="mt-4 text-red-600">{{ error() }}</div>

  <div *ngIf="!loading() && status() as s" class="mt-6 space-y-4">
    <div class="border rounded p-4">
      <div class="text-sm text-gray-500">Current Plan</div>
      <div class="text-lg">{{ s?.plan_name || 'None' }}</div>
      <div class="text-sm text-gray-500">Status: {{ s?.status || 'n/a' }}</div>
      <div class="text-sm text-gray-500">Period: {{ s?.current_period_start }} â†’ {{ s?.current_period_end }}</div>
    </div>

    <div class="flex gap-3">
      <button class="px-3 py-2 rounded bg-black text-white" (click)="openPortal()">Manage Subscription</button>
      <!-- Example fixed price IDs; replace with your Stripe price IDs -->
      <button class="px-3 py-2 rounded bg-indigo-600 text-white" (click)="changePlan('price_1SCeS1JgBCtyoXUxijaGPUjS')">Choose Basic</button>
      <button class="px-3 py-2 rounded bg-indigo-600 text-white" (click)="changePlan('price_1SCgI1JgBCtyoXUxaa1fUjvz')">Choose Pro</button>
    </div>
  </div>
</div>


